"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PathMaker = void 0;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var PathMaker =
/*#__PURE__*/
function () {
  function PathMaker() {
    _classCallCheck(this, PathMaker);

    _defineProperty(this, "path", {
      c: false,
      i: [],
      o: [],
      v: []
    });

    _defineProperty(this, "currentX", 0);

    _defineProperty(this, "currentY", 0);

    _defineProperty(this, "offsetX", Infinity);

    _defineProperty(this, "offsetY", Infinity);
  }

  _createClass(PathMaker, [{
    key: "updateXY",
    value: function updateXY(x, y) {
      this.currentX = x;
      this.currentY = y;
      this.offsetX = Math.min(this.offsetX, x);
      this.offsetY = Math.min(this.offsetY, y);
    }
  }, {
    key: "calculateBezierMinMax",
    value: function calculateBezierMinMax(p0, p1, p2, p3) {
      var a = 3 * (p3 - 3 * p2 + 3 * p1 - p0);
      var b = 2 * (3 * p2 - 6 * p1 + 3 * p0);
      var c = 3 * p1;
      var min = Infinity,
          max = -Infinity;

      if (b * b - 4 * a * c >= 0) {
        var sqrt = Math.sqrt(b * b - 4 * a * c);
        var roots = [1, -1].map(function (multi) {
          return (multi * sqrt - b) / 2 / a;
        });
        roots.forEach(function (root) {
          if (root > 0 && root < 1) {
            var value = Math.pow(1 - root, 3) * p0 + 3 * Math.pow(1 - root, 2) * root * p1 + 3 * (1 - root) * root * root * p2 + Math.pow(root, 3) * p3;
            min = Math.min(min, value);
            max = Math.max(max, value);
          }
        });
      }

      min = Math.min(min, p0, p3);
      max = Math.max(max, p0, p3);
      return [min, max];
    }
  }, {
    key: "moveTo",
    value: function moveTo(x, y) {
      this.path.c = false;
      this.path.i = [[0, 0]];
      this.path.o = [];
      this.path.v = [[x, y]];
      this.currentX = x;
      this.currentY = y;
      this.offsetX = x;
      this.offsetY = y;
    }
  }, {
    key: "lineTo",
    value: function lineTo(x, y) {
      this.path.i.push([0, 0]);
      this.path.o.push([0, 0]);
      this.path.v.push([x, y]);
      this.updateXY(x, y);
    }
  }, {
    key: "lineToRelative",
    value: function lineToRelative(x, y) {
      this.lineTo(this.currentX + x, this.currentY + y);
    }
  }, {
    key: "horizontalTo",
    value: function horizontalTo(x) {
      this.lineTo(x, this.currentY);
    }
  }, {
    key: "horizontalToRelative",
    value: function horizontalToRelative(x) {
      this.horizontalTo(this.currentX + x);
    }
  }, {
    key: "verticalTo",
    value: function verticalTo(y) {
      this.lineTo(this.currentX, y);
    }
  }, {
    key: "verticalToRelative",
    value: function verticalToRelative(y) {
      this.verticalTo(this.currentY + y);
    }
  }, {
    key: "cubicBezierCurveTo",
    value: function cubicBezierCurveTo(c1x, c1y, c2x, c2y, x, y) {
      this.path.i.push([c2x - x, c2y - y]);
      this.path.o.push([c1x - this.currentX, c1y - this.currentY]);
      this.path.v.push([x, y]);
      this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, c1x, c2x, x))));
      this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, c1y, c2y, y))));
      this.updateXY(x, y);
    }
  }, {
    key: "cubicBezierCurveToRelative",
    value: function cubicBezierCurveToRelative(c1x, c1y, c2x, c2y, x, y) {
      this.cubicBezierCurveTo(this.currentX + c1x, this.currentY + c1y, this.currentX + c2x, this.currentY + c2y, this.currentX + x, this.currentY + y);
    }
  }, {
    key: "quadraticBezierCurveTo",
    value: function quadraticBezierCurveTo(cx, cy, x, y) {
      this.path.i.push([cx - x, cy - y]);
      this.path.o.push([cx - this.currentX, cy - this.currentY]);
      this.path.v.push([x, y]);
      this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, cx, cx, x))));
      this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, cy, cy, y))));
      this.updateXY(x, y);
    }
  }, {
    key: "quadraticBezierCurveToRelative",
    value: function quadraticBezierCurveToRelative(cx, cy, x, y) {
      this.quadraticBezierCurveTo(this.currentX + cx, this.currentY + cy, this.currentX + x, this.currentY + y);
    }
  }, {
    key: "arcTo",
    value: function arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {
      var cSeries = PathMaker.a2c(this.currentX, this.currentY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y);

      while (cSeries.length >= 6) {
        var iovList = cSeries.splice(0, 6);
        this.path.i.push([iovList[2] - iovList[4], iovList[3] - iovList[5]]);
        this.path.o.push([iovList[0] - this.currentX, iovList[1] - this.currentY]);
        this.path.v.push([iovList[4], iovList[5]]);
        this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, iovList[0], iovList[2], iovList[4]))));
        this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, iovList[1], iovList[3], iovList[5]))));
        this.updateXY(iovList[4], iovList[5]);
      }
    }
  }, {
    key: "arcToRelative",
    value: function arcToRelative(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {
      this.arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, this.currentX + x, this.currentY + y);
    }
  }, {
    key: "closePath",
    value: function closePath() {
      this.path.c = true;
    }
  }, {
    key: "uniform",
    value: function uniform() {
      var _this = this;

      while (this.path.o.length < this.path.i.length) {
        this.path.o.push([0, 0]);
      }

      this.path.v.forEach(function (value) {
        value[0] -= _this.offsetX;
        value[1] -= _this.offsetY;
      });
      this.offsetX = 0;
      this.offsetY = 0;
    }
  }], [{
    key: "a2c",
    value: function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {
      // for more information of where this Math came from visit:
      // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes
      var _120 = Math.PI * 120 / 180,
          rad = Math.PI / 180 * (+angle || 0),
          res = [],
          xy,
          rotate = function rotate(x, y, rad) {
        var X = x * Math.cos(rad) - y * Math.sin(rad),
            Y = x * Math.sin(rad) + y * Math.cos(rad);
        return {
          x: X,
          y: Y
        };
      };

      if (!rx || !ry) {
        return [x1, y1, x2, y2, x2, y2];
      }

      if (!recursive) {
        xy = rotate(x1, y1, -rad);
        x1 = xy.x;
        y1 = xy.y;
        xy = rotate(x2, y2, -rad);
        x2 = xy.x;
        y2 = xy.y;
        var cos = Math.cos(Math.PI / 180 * angle),
            sin = Math.sin(Math.PI / 180 * angle),
            x = (x1 - x2) / 2,
            y = (y1 - y2) / 2;
        var h = x * x / (rx * rx) + y * y / (ry * ry);

        if (h > 1) {
          h = Math.sqrt(h);
          rx = h * rx;
          ry = h * ry;
        }

        var rx2 = rx * rx,
            ry2 = ry * ry,
            k = (large_arc_flag == sweep_flag ? -1 : 1) * Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),
            cx = k * rx * y / ry + (x1 + x2) / 2,
            cy = k * -ry * x / rx + (y1 + y2) / 2,
            f1 = Math.asin((y1 - cy) / ry),
            f2 = Math.asin((y2 - cy) / ry);
        f1 = x1 < cx ? Math.PI - f1 : f1;
        f2 = x2 < cx ? Math.PI - f2 : f2;
        f1 < 0 && (f1 = Math.PI * 2 + f1);
        f2 < 0 && (f2 = Math.PI * 2 + f2);

        if (sweep_flag && f1 > f2) {
          f1 = f1 - Math.PI * 2;
        }

        if (!sweep_flag && f2 > f1) {
          f2 = f2 - Math.PI * 2;
        }
      } else {
        f1 = recursive[0];
        f2 = recursive[1];
        cx = recursive[2];
        cy = recursive[3];
      }

      var df = f2 - f1;

      if (Math.abs(df) > _120) {
        var f2old = f2,
            x2old = x2,
            y2old = y2;
        f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);
        x2 = cx + rx * Math.cos(f2);
        y2 = cy + ry * Math.sin(f2);
        res = this.a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);
      }

      df = f2 - f1;
      var c1 = Math.cos(f1),
          s1 = Math.sin(f1),
          c2 = Math.cos(f2),
          s2 = Math.sin(f2),
          t = Math.tan(df / 4),
          hx = 4 / 3 * rx * t,
          hy = 4 / 3 * ry * t,
          m1 = [x1, y1],
          m2 = [x1 + hx * s1, y1 - hy * c1],
          m3 = [x2 + hx * s2, y2 - hy * c2],
          m4 = [x2, y2];
      m2[0] = 2 * m1[0] - m2[0];
      m2[1] = 2 * m1[1] - m2[1];

      if (recursive) {
        return [m2, m3, m4].concat(res);
      } else {
        res = [m2, m3, m4].concat(res).join().split(",").map(function (x) {
          return parseFloat(x);
        });
        var newres = [];

        for (var i = 0, ii = res.length; i < ii; i++) {
          newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;
        }

        return newres;
      }
    }
  }]);

  return PathMaker;
}();

exports.PathMaker = PathMaker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXRoLnRzIl0sIm5hbWVzIjpbIlBhdGhNYWtlciIsImMiLCJpIiwibyIsInYiLCJJbmZpbml0eSIsIngiLCJ5IiwiY3VycmVudFgiLCJjdXJyZW50WSIsIm9mZnNldFgiLCJNYXRoIiwibWluIiwib2Zmc2V0WSIsInAwIiwicDEiLCJwMiIsInAzIiwiYSIsImIiLCJtYXgiLCJzcXJ0Iiwicm9vdHMiLCJtYXAiLCJtdWx0aSIsImZvckVhY2giLCJyb290IiwidmFsdWUiLCJwb3ciLCJwYXRoIiwicHVzaCIsInVwZGF0ZVhZIiwibGluZVRvIiwiaG9yaXpvbnRhbFRvIiwidmVydGljYWxUbyIsImMxeCIsImMxeSIsImMyeCIsImMyeSIsImNhbGN1bGF0ZUJlemllck1pbk1heCIsImN1YmljQmV6aWVyQ3VydmVUbyIsImN4IiwiY3kiLCJxdWFkcmF0aWNCZXppZXJDdXJ2ZVRvIiwicngiLCJyeSIsInhBeGlzUm90YXRpb24iLCJsYXJnZUFyY0ZsYWciLCJzd2VlcEZsYWciLCJjU2VyaWVzIiwiYTJjIiwibGVuZ3RoIiwiaW92TGlzdCIsInNwbGljZSIsImFyY1RvIiwieDEiLCJ5MSIsImFuZ2xlIiwibGFyZ2VfYXJjX2ZsYWciLCJzd2VlcF9mbGFnIiwieDIiLCJ5MiIsInJlY3Vyc2l2ZSIsIl8xMjAiLCJQSSIsInJhZCIsInJlcyIsInh5Iiwicm90YXRlIiwiWCIsImNvcyIsInNpbiIsIlkiLCJoIiwicngyIiwicnkyIiwiayIsImFicyIsImYxIiwiYXNpbiIsImYyIiwiZGYiLCJmMm9sZCIsIngyb2xkIiwieTJvbGQiLCJjMSIsInMxIiwiYzIiLCJzMiIsInQiLCJ0YW4iLCJoeCIsImh5IiwibTEiLCJtMiIsIm0zIiwibTQiLCJjb25jYXQiLCJqb2luIiwic3BsaXQiLCJwYXJzZUZsb2F0IiwibmV3cmVzIiwiaWkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBRWFBLFM7Ozs7OztrQ0FDYztBQUNuQkMsTUFBQUEsQ0FB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SUFBekIsR0FBZ0NDLEtBQWhDLENBQXNDLEdBQXRDLEVBQTJDNUUsR0FBM0MsQ0FBK0MsVUFBQWpCLENBQUM7QUFBQSxpQkFBSThGLFVBQVUsQ0FBQzlGLENBQUQsQ0FBZDtBQUFBLFNBQWhELENBQU47QUFDQSxZQUFJK0YsTUFBTSxHQUFHLEVBQWI7O0FBQ0EsYUFBSyxJQUFJbkcsQ0FBQyxHQUFHLENBQVIsRUFBV29HLEVBQUUsR0FBR3BDLEdBQUcsQ0FBQ2YsTUFBekIsRUFBaUNqRCxDQUFDLEdBQUdvRyxFQUFyQyxFQUF5Q3BHLENBQUMsRUFBMUMsRUFBOEM7QUFDMUNtRyxVQUFBQSxNQUFNLENBQUNuRyxDQUFELENBQU4sR0FBWUEsQ0FBQyxHQUFHLENBQUosR0FBUWtFLE1BQU0sQ0FBQ0YsR0FBRyxDQUFDaEUsQ0FBQyxHQUFHLENBQUwsQ0FBSixFQUFhZ0UsR0FBRyxDQUFDaEUsQ0FBRCxDQUFoQixFQUFxQitELEdBQXJCLENBQU4sQ0FBZ0MxRCxDQUF4QyxHQUE0QzZELE1BQU0sQ0FBQ0YsR0FBRyxDQUFDaEUsQ0FBRCxDQUFKLEVBQVNnRSxHQUFHLENBQUNoRSxDQUFDLEdBQUcsQ0FBTCxDQUFaLEVBQXFCK0QsR0FBckIsQ0FBTixDQUFnQzNELENBQXhGO0FBQ0g7O0FBQ0QsZUFBTytGLE1BQVA7QUFDSDtBQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGF0aERlZiB9IGZyb20gJy4vYW5pbWF0aW9uJ1xuXG5leHBvcnQgY2xhc3MgUGF0aE1ha2VyIHtcbiAgICBwdWJsaWMgcGF0aDogUGF0aERlZiA9IHtcbiAgICAgICAgYzogZmFsc2UsXG4gICAgICAgIGk6IFtdLFxuICAgICAgICBvOiBbXSxcbiAgICAgICAgdjogW11cbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBjdXJyZW50WDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIGN1cnJlbnRZOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgb2Zmc2V0WDogbnVtYmVyID0gSW5maW5pdHk7XG4gICAgcHJpdmF0ZSBvZmZzZXRZOiBudW1iZXIgPSBJbmZpbml0eTtcblxuICAgIHByaXZhdGUgdXBkYXRlWFkoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50WCA9IHhcbiAgICAgICAgdGhpcy5jdXJyZW50WSA9IHlcbiAgICAgICAgdGhpcy5vZmZzZXRYID0gTWF0aC5taW4odGhpcy5vZmZzZXRYLCB4KVxuICAgICAgICB0aGlzLm9mZnNldFkgPSBNYXRoLm1pbih0aGlzLm9mZnNldFksIHkpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVCZXppZXJNaW5NYXgocDA6IG51bWJlciwgcDE6IG51bWJlciwgcDI6IG51bWJlciwgcDM6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBjb25zdCBhID0gMyAqIChwMyAtIDMgKiBwMiArIDMgKiBwMSAtIHAwKVxuICAgICAgICBjb25zdCBiID0gMiAqICgzICogcDIgLSA2ICogcDEgKyAzICogcDApXG4gICAgICAgIGNvbnN0IGMgPSAzICogcDFcbiAgICAgICAgbGV0IG1pbiA9IEluZmluaXR5LCBtYXggPSAtSW5maW5pdHlcbiAgICAgICAgaWYgKGIgKiBiIC0gNCAqIGEgKiBjID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNxcnQgPSBNYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpXG4gICAgICAgICAgICBjb25zdCByb290cyA9IFsxLCAtMV0ubWFwKG11bHRpID0+IChtdWx0aSAqIHNxcnQgLSBiKSAvIDIgLyBhKVxuICAgICAgICAgICAgcm9vdHMuZm9yRWFjaChyb290ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocm9vdCA+IDAgJiYgcm9vdCA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLnBvdygxIC0gcm9vdCwgMykgKiBwMCArIDMgKiBNYXRoLnBvdygxIC0gcm9vdCwgMikgKiByb290ICogcDEgKyAzICogKDEgLSByb290KSAqIHJvb3QgKiByb290ICogcDIgKyBNYXRoLnBvdyhyb290LCAzKSAqIHAzXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIHAwLCBwMylcbiAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBwMCwgcDMpXG4gICAgICAgIHJldHVybiBbbWluLCBtYXhdXG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLnBhdGguYyA9IGZhbHNlXG4gICAgICAgIHRoaXMucGF0aC5pID0gW1swLCAwXV1cbiAgICAgICAgdGhpcy5wYXRoLm8gPSBbXVxuICAgICAgICB0aGlzLnBhdGgudiA9IFtbeCwgeV1dXG4gICAgICAgIHRoaXMuY3VycmVudFggPSB4XG4gICAgICAgIHRoaXMuY3VycmVudFkgPSB5XG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IHhcbiAgICAgICAgdGhpcy5vZmZzZXRZID0geVxuICAgIH1cbiAgICBwdWJsaWMgbGluZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucGF0aC5pIS5wdXNoKFswLCAwXSlcbiAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goWzAsIDBdKVxuICAgICAgICB0aGlzLnBhdGgudiEucHVzaChbeCwgeV0pXG4gICAgICAgIHRoaXMudXBkYXRlWFkoeCwgeSlcbiAgICB9XG4gICAgcHVibGljIGxpbmVUb1JlbGF0aXZlKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubGluZVRvKHRoaXMuY3VycmVudFggKyB4LCB0aGlzLmN1cnJlbnRZICsgeSlcbiAgICB9XG4gICAgcHVibGljIGhvcml6b250YWxUbyh4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5saW5lVG8oeCwgdGhpcy5jdXJyZW50WSlcbiAgICB9XG4gICAgcHVibGljIGhvcml6b250YWxUb1JlbGF0aXZlKHg6IG51bWJlcikge1xuICAgICAgICB0aGlzLmhvcml6b250YWxUbyh0aGlzLmN1cnJlbnRYICsgeClcbiAgICB9XG4gICAgcHVibGljIHZlcnRpY2FsVG8oeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubGluZVRvKHRoaXMuY3VycmVudFgsIHkpXG4gICAgfVxuICAgIHB1YmxpYyB2ZXJ0aWNhbFRvUmVsYXRpdmUoeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMudmVydGljYWxUbyh0aGlzLmN1cnJlbnRZICsgeSlcbiAgICB9XG4gICAgcHVibGljIGN1YmljQmV6aWVyQ3VydmVUbyhcbiAgICAgICAgYzF4OiBudW1iZXIsXG4gICAgICAgIGMxeTogbnVtYmVyLFxuICAgICAgICBjMng6IG51bWJlcixcbiAgICAgICAgYzJ5OiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMucGF0aC5pIS5wdXNoKFtjMnggLSB4LCBjMnkgLSB5XSlcbiAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goW2MxeCAtIHRoaXMuY3VycmVudFgsIGMxeSAtIHRoaXMuY3VycmVudFldKVxuICAgICAgICB0aGlzLnBhdGgudiEucHVzaChbeCwgeV0pXG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IE1hdGgubWluKHRoaXMub2Zmc2V0WCwgLi4udGhpcy5jYWxjdWxhdGVCZXppZXJNaW5NYXgodGhpcy5jdXJyZW50WCwgYzF4LCBjMngsIHgpKVxuICAgICAgICB0aGlzLm9mZnNldFkgPSBNYXRoLm1pbih0aGlzLm9mZnNldFksIC4uLnRoaXMuY2FsY3VsYXRlQmV6aWVyTWluTWF4KHRoaXMuY3VycmVudFksIGMxeSwgYzJ5LCB5KSlcbiAgICAgICAgdGhpcy51cGRhdGVYWSh4LCB5KVxuICAgIH1cbiAgICBwdWJsaWMgY3ViaWNCZXppZXJDdXJ2ZVRvUmVsYXRpdmUoXG4gICAgICAgIGMxeDogbnVtYmVyLFxuICAgICAgICBjMXk6IG51bWJlcixcbiAgICAgICAgYzJ4OiBudW1iZXIsXG4gICAgICAgIGMyeTogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlclxuICAgICkge1xuICAgICAgICB0aGlzLmN1YmljQmV6aWVyQ3VydmVUbyh0aGlzLmN1cnJlbnRYICsgYzF4LCB0aGlzLmN1cnJlbnRZICsgYzF5LCB0aGlzLmN1cnJlbnRYICsgYzJ4LCB0aGlzLmN1cnJlbnRZICsgYzJ5LCB0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXG4gICAgfVxuICAgIHB1YmxpYyBxdWFkcmF0aWNCZXppZXJDdXJ2ZVRvKGN4OiBudW1iZXIsIGN5OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucGF0aC5pIS5wdXNoKFtjeCAtIHgsIGN5IC0geV0pXG4gICAgICAgIHRoaXMucGF0aC5vIS5wdXNoKFtjeCAtIHRoaXMuY3VycmVudFgsIGN5IC0gdGhpcy5jdXJyZW50WV0pXG4gICAgICAgIHRoaXMucGF0aC52IS5wdXNoKFt4LCB5XSlcbiAgICAgICAgdGhpcy5vZmZzZXRYID0gTWF0aC5taW4odGhpcy5vZmZzZXRYLCAuLi50aGlzLmNhbGN1bGF0ZUJlemllck1pbk1heCh0aGlzLmN1cnJlbnRYLCBjeCwgY3gsIHgpKVxuICAgICAgICB0aGlzLm9mZnNldFkgPSBNYXRoLm1pbih0aGlzLm9mZnNldFksIC4uLnRoaXMuY2FsY3VsYXRlQmV6aWVyTWluTWF4KHRoaXMuY3VycmVudFksIGN5LCBjeSwgeSkpXG4gICAgICAgIHRoaXMudXBkYXRlWFkoeCwgeSlcbiAgICB9XG4gICAgcHVibGljIHF1YWRyYXRpY0JlemllckN1cnZlVG9SZWxhdGl2ZShjeDogbnVtYmVyLCBjeTogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLnF1YWRyYXRpY0JlemllckN1cnZlVG8odGhpcy5jdXJyZW50WCArIGN4LCB0aGlzLmN1cnJlbnRZICsgY3ksIHRoaXMuY3VycmVudFggKyB4LCB0aGlzLmN1cnJlbnRZICsgeSlcbiAgICB9XG4gICAgcHVibGljIGFyY1RvKFxuICAgICAgICByeDogbnVtYmVyLFxuICAgICAgICByeTogbnVtYmVyLFxuICAgICAgICB4QXhpc1JvdGF0aW9uOiBudW1iZXIsXG4gICAgICAgIGxhcmdlQXJjRmxhZzogbnVtYmVyLFxuICAgICAgICBzd2VlcEZsYWc6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgY29uc3QgY1NlcmllcyA9IFBhdGhNYWtlci5hMmModGhpcy5jdXJyZW50WCwgdGhpcy5jdXJyZW50WSwgcngsIHJ5LCB4QXhpc1JvdGF0aW9uLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZywgeCwgeSkgYXMgbnVtYmVyW11cbiAgICAgICAgd2hpbGUgKGNTZXJpZXMubGVuZ3RoID49IDYpIHtcbiAgICAgICAgICAgIGNvbnN0IGlvdkxpc3QgPSBjU2VyaWVzLnNwbGljZSgwLCA2KVxuICAgICAgICAgICAgdGhpcy5wYXRoLmkhLnB1c2goW2lvdkxpc3RbMl0gLSBpb3ZMaXN0WzRdLCBpb3ZMaXN0WzNdIC0gaW92TGlzdFs1XV0pXG4gICAgICAgICAgICB0aGlzLnBhdGgubyEucHVzaChbaW92TGlzdFswXSAtIHRoaXMuY3VycmVudFgsIGlvdkxpc3RbMV0gLSB0aGlzLmN1cnJlbnRZXSlcbiAgICAgICAgICAgIHRoaXMucGF0aC52IS5wdXNoKFtpb3ZMaXN0WzRdLCBpb3ZMaXN0WzVdXSlcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0WCA9IE1hdGgubWluKHRoaXMub2Zmc2V0WCwgLi4udGhpcy5jYWxjdWxhdGVCZXppZXJNaW5NYXgodGhpcy5jdXJyZW50WCwgaW92TGlzdFswXSwgaW92TGlzdFsyXSwgaW92TGlzdFs0XSkpXG4gICAgICAgICAgICB0aGlzLm9mZnNldFkgPSBNYXRoLm1pbih0aGlzLm9mZnNldFksIC4uLnRoaXMuY2FsY3VsYXRlQmV6aWVyTWluTWF4KHRoaXMuY3VycmVudFksIGlvdkxpc3RbMV0sIGlvdkxpc3RbM10sIGlvdkxpc3RbNV0pKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVYWShpb3ZMaXN0WzRdLCBpb3ZMaXN0WzVdKVxuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBhcmNUb1JlbGF0aXZlKFxuICAgICAgICByeDogbnVtYmVyLFxuICAgICAgICByeTogbnVtYmVyLFxuICAgICAgICB4QXhpc1JvdGF0aW9uOiBudW1iZXIsXG4gICAgICAgIGxhcmdlQXJjRmxhZzogbnVtYmVyLFxuICAgICAgICBzd2VlcEZsYWc6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5hcmNUbyhyeCwgcnksIHhBeGlzUm90YXRpb24sIGxhcmdlQXJjRmxhZywgc3dlZXBGbGFnLCB0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgYTJjKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHJ4OiBudW1iZXIsIHJ5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIsIGxhcmdlX2FyY19mbGFnOiBudW1iZXIsIHN3ZWVwX2ZsYWc6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlciwgcmVjdXJzaXZlPzogbnVtYmVyW10pOiBudW1iZXJbXSB8IG51bWJlcltdW10ge1xuICAgICAgICAvLyBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvZiB3aGVyZSB0aGlzIE1hdGggY2FtZSBmcm9tIHZpc2l0OlxuICAgICAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9pbXBsbm90ZS5odG1sI0FyY0ltcGxlbWVudGF0aW9uTm90ZXNcbiAgICAgICAgdmFyIF8xMjAgPSBNYXRoLlBJICogMTIwIC8gMTgwLFxuICAgICAgICAgICAgcmFkID0gTWF0aC5QSSAvIDE4MCAqICgrYW5nbGUgfHwgMCksXG4gICAgICAgICAgICByZXM6IG51bWJlcltdID0gW10sXG4gICAgICAgICAgICB4eSxcbiAgICAgICAgICAgIHJvdGF0ZSA9ICh4OiBudW1iZXIsIHk6IG51bWJlciwgcmFkOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgWCA9IHggKiBNYXRoLmNvcyhyYWQpIC0geSAqIE1hdGguc2luKHJhZCksXG4gICAgICAgICAgICAgICAgICAgIFkgPSB4ICogTWF0aC5zaW4ocmFkKSArIHkgKiBNYXRoLmNvcyhyYWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHg6IFgsIHk6IFkgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGlmICghcnggfHwgIXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gW3gxLCB5MSwgeDIsIHkyLCB4MiwgeTJdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVjdXJzaXZlKSB7XG4gICAgICAgICAgICB4eSA9IHJvdGF0ZSh4MSwgeTEsIC1yYWQpO1xuICAgICAgICAgICAgeDEgPSB4eS54O1xuICAgICAgICAgICAgeTEgPSB4eS55O1xuICAgICAgICAgICAgeHkgPSByb3RhdGUoeDIsIHkyLCAtcmFkKTtcbiAgICAgICAgICAgIHgyID0geHkueDtcbiAgICAgICAgICAgIHkyID0geHkueTtcbiAgICAgICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcyhNYXRoLlBJIC8gMTgwICogYW5nbGUpLFxuICAgICAgICAgICAgICAgIHNpbiA9IE1hdGguc2luKE1hdGguUEkgLyAxODAgKiBhbmdsZSksXG4gICAgICAgICAgICAgICAgeCA9ICh4MSAtIHgyKSAvIDIsXG4gICAgICAgICAgICAgICAgeSA9ICh5MSAtIHkyKSAvIDI7XG4gICAgICAgICAgICB2YXIgaCA9IHggKiB4IC8gKHJ4ICogcngpICsgeSAqIHkgLyAocnkgKiByeSk7XG4gICAgICAgICAgICBpZiAoaCA+IDEpIHtcbiAgICAgICAgICAgICAgICBoID0gTWF0aC5zcXJ0KGgpO1xuICAgICAgICAgICAgICAgIHJ4ID0gaCAqIHJ4O1xuICAgICAgICAgICAgICAgIHJ5ID0gaCAqIHJ5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJ4MiA9IHJ4ICogcngsXG4gICAgICAgICAgICAgICAgcnkyID0gcnkgKiByeSxcbiAgICAgICAgICAgICAgICBrID0gKGxhcmdlX2FyY19mbGFnID09IHN3ZWVwX2ZsYWcgPyAtMSA6IDEpICpcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5zcXJ0KE1hdGguYWJzKChyeDIgKiByeTIgLSByeDIgKiB5ICogeSAtIHJ5MiAqIHggKiB4KSAvIChyeDIgKiB5ICogeSArIHJ5MiAqIHggKiB4KSkpLFxuICAgICAgICAgICAgICAgIGN4ID0gayAqIHJ4ICogeSAvIHJ5ICsgKHgxICsgeDIpIC8gMixcbiAgICAgICAgICAgICAgICBjeSA9IGsgKiAtcnkgKiB4IC8gcnggKyAoeTEgKyB5MikgLyAyLFxuICAgICAgICAgICAgICAgIGYxID0gTWF0aC5hc2luKCh5MSAtIGN5KSAvIHJ5KSxcbiAgICAgICAgICAgICAgICBmMiA9IE1hdGguYXNpbigoeTIgLSBjeSkgLyByeSk7XG5cbiAgICAgICAgICAgIGYxID0geDEgPCBjeCA/IE1hdGguUEkgLSBmMSA6IGYxO1xuICAgICAgICAgICAgZjIgPSB4MiA8IGN4ID8gTWF0aC5QSSAtIGYyIDogZjI7XG4gICAgICAgICAgICBmMSA8IDAgJiYgKGYxID0gTWF0aC5QSSAqIDIgKyBmMSk7XG4gICAgICAgICAgICBmMiA8IDAgJiYgKGYyID0gTWF0aC5QSSAqIDIgKyBmMik7XG4gICAgICAgICAgICBpZiAoc3dlZXBfZmxhZyAmJiBmMSA+IGYyKSB7XG4gICAgICAgICAgICAgICAgZjEgPSBmMSAtIE1hdGguUEkgKiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzd2VlcF9mbGFnICYmIGYyID4gZjEpIHtcbiAgICAgICAgICAgICAgICBmMiA9IGYyIC0gTWF0aC5QSSAqIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmMSA9IHJlY3Vyc2l2ZVswXTtcbiAgICAgICAgICAgIGYyID0gcmVjdXJzaXZlWzFdO1xuICAgICAgICAgICAgY3ggPSByZWN1cnNpdmVbMl07XG4gICAgICAgICAgICBjeSA9IHJlY3Vyc2l2ZVszXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGYgPSBmMiAtIGYxO1xuICAgICAgICBpZiAoTWF0aC5hYnMoZGYpID4gXzEyMCkge1xuICAgICAgICAgICAgdmFyIGYyb2xkID0gZjIsXG4gICAgICAgICAgICAgICAgeDJvbGQgPSB4MixcbiAgICAgICAgICAgICAgICB5Mm9sZCA9IHkyO1xuICAgICAgICAgICAgZjIgPSBmMSArIF8xMjAgKiAoc3dlZXBfZmxhZyAmJiBmMiA+IGYxID8gMSA6IC0xKTtcbiAgICAgICAgICAgIHgyID0gY3ggKyByeCAqIE1hdGguY29zKGYyKTtcbiAgICAgICAgICAgIHkyID0gY3kgKyByeSAqIE1hdGguc2luKGYyKTtcbiAgICAgICAgICAgIHJlcyA9IHRoaXMuYTJjKHgyLCB5MiwgcngsIHJ5LCBhbmdsZSwgMCwgc3dlZXBfZmxhZywgeDJvbGQsIHkyb2xkLCBbZjIsIGYyb2xkLCBjeCwgY3ldKSBhcyBudW1iZXJbXTtcbiAgICAgICAgfVxuICAgICAgICBkZiA9IGYyIC0gZjE7XG4gICAgICAgIHZhciBjMSA9IE1hdGguY29zKGYxKSxcbiAgICAgICAgICAgIHMxID0gTWF0aC5zaW4oZjEpLFxuICAgICAgICAgICAgYzIgPSBNYXRoLmNvcyhmMiksXG4gICAgICAgICAgICBzMiA9IE1hdGguc2luKGYyKSxcbiAgICAgICAgICAgIHQgPSBNYXRoLnRhbihkZiAvIDQpLFxuICAgICAgICAgICAgaHggPSA0IC8gMyAqIHJ4ICogdCxcbiAgICAgICAgICAgIGh5ID0gNCAvIDMgKiByeSAqIHQsXG4gICAgICAgICAgICBtMSA9IFt4MSwgeTFdLFxuICAgICAgICAgICAgbTIgPSBbeDEgKyBoeCAqIHMxLCB5MSAtIGh5ICogYzFdLFxuICAgICAgICAgICAgbTMgPSBbeDIgKyBoeCAqIHMyLCB5MiAtIGh5ICogYzJdLFxuICAgICAgICAgICAgbTQgPSBbeDIsIHkyXTtcbiAgICAgICAgbTJbMF0gPSAyICogbTFbMF0gLSBtMlswXTtcbiAgICAgICAgbTJbMV0gPSAyICogbTFbMV0gLSBtMlsxXTtcbiAgICAgICAgaWYgKHJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFttMiwgbTMsIG00XS5jb25jYXQocmVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcyA9IFttMiwgbTMsIG00XS5jb25jYXQocmVzKS5qb2luKCkuc3BsaXQoXCIsXCIpLm1hcCh4ID0+IHBhcnNlRmxvYXQoeCkpO1xuICAgICAgICAgICAgdmFyIG5ld3JlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuZXdyZXNbaV0gPSBpICUgMiA/IHJvdGF0ZShyZXNbaSAtIDFdLCByZXNbaV0sIHJhZCkueSA6IHJvdGF0ZShyZXNbaV0sIHJlc1tpICsgMV0sIHJhZCkueDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdyZXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2xvc2VQYXRoKCkge1xuICAgICAgICB0aGlzLnBhdGguYyA9IHRydWVcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5pZm9ybSgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMucGF0aC5vIS5sZW5ndGggPCB0aGlzLnBhdGguaSEubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goWzAsIDBdKVxuICAgICAgICB0aGlzLnBhdGgudiEuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB2YWx1ZVswXSAtPSB0aGlzLm9mZnNldFhcbiAgICAgICAgICAgIHZhbHVlWzFdIC09IHRoaXMub2Zmc2V0WVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLm9mZnNldFggPSAwXG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IDBcbiAgICB9XG59Il19