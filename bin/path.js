"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PathMaker = void 0;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var PathMaker =
/*#__PURE__*/
function () {
  function PathMaker() {
    _classCallCheck(this, PathMaker);

    _defineProperty(this, "path", {
      c: false,
      i: [],
      o: [],
      v: []
    });

    _defineProperty(this, "currentX", 0);

    _defineProperty(this, "currentY", 0);

    _defineProperty(this, "offsetX", Infinity);

    _defineProperty(this, "offsetY", Infinity);
  }

  _createClass(PathMaker, [{
    key: "updateXY",
    value: function updateXY(x, y) {
      this.currentX = x;
      this.currentY = y;
      this.offsetX = Math.min(this.offsetX, x);
      this.offsetY = Math.min(this.offsetY, y);
    }
  }, {
    key: "calculateBezierMinMax",
    value: function calculateBezierMinMax(p0, p1, p2, p3) {
      var a = 3 * (p3 - 3 * p2 + 3 * p1 - p0);
      var b = 6 * (p2 - 2 * p1 + p0);
      var c = 3 * (p1 - p0);
      var min = Infinity,
          max = -Infinity;

      if (b * b - 4 * a * c >= 0) {
        var sqrt = Math.sqrt(b * b - 4 * a * c);
        var roots = [1, -1].map(function (multi) {
          return (multi * sqrt - b) / 2 / a;
        });
        roots.forEach(function (root) {
          if (root > 0 && root < 1) {
            var value = Math.pow(1 - root, 3) * p0 + 3 * Math.pow(1 - root, 2) * root * p1 + 3 * (1 - root) * root * root * p2 + Math.pow(root, 3) * p3;
            min = Math.min(min, value);
            max = Math.max(max, value);
          }
        });
      }

      min = Math.min(min, p0, p3);
      max = Math.max(max, p0, p3);
      return [min, max];
    }
  }, {
    key: "moveTo",
    value: function moveTo(x, y) {
      this.path.c = false;
      this.path.i = [[0, 0]];
      this.path.o = [];
      this.path.v = [[x, y]];
      this.currentX = x;
      this.currentY = y;
      this.offsetX = x;
      this.offsetY = y;
    }
  }, {
    key: "lineTo",
    value: function lineTo(x, y) {
      this.path.i.push([0, 0]);
      this.path.o.push([0, 0]);
      this.path.v.push([x, y]);
      this.updateXY(x, y);
    }
  }, {
    key: "lineToRelative",
    value: function lineToRelative(x, y) {
      this.lineTo(this.currentX + x, this.currentY + y);
    }
  }, {
    key: "horizontalTo",
    value: function horizontalTo(x) {
      this.lineTo(x, this.currentY);
    }
  }, {
    key: "horizontalToRelative",
    value: function horizontalToRelative(x) {
      this.horizontalTo(this.currentX + x);
    }
  }, {
    key: "verticalTo",
    value: function verticalTo(y) {
      this.lineTo(this.currentX, y);
    }
  }, {
    key: "verticalToRelative",
    value: function verticalToRelative(y) {
      this.verticalTo(this.currentY + y);
    }
  }, {
    key: "cubicBezierCurveTo",
    value: function cubicBezierCurveTo(c1x, c1y, c2x, c2y, x, y) {
      this.path.i.push([c2x - x, c2y - y]);
      this.path.o.push([c1x - this.currentX, c1y - this.currentY]);
      this.path.v.push([x, y]);
      this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, c1x, c2x, x))));
      this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, c1y, c2y, y))));
      this.updateXY(x, y);
    }
  }, {
    key: "cubicBezierCurveToRelative",
    value: function cubicBezierCurveToRelative(c1x, c1y, c2x, c2y, x, y) {
      this.cubicBezierCurveTo(this.currentX + c1x, this.currentY + c1y, this.currentX + c2x, this.currentY + c2y, this.currentX + x, this.currentY + y);
    }
  }, {
    key: "quadraticBezierCurveTo",
    value: function quadraticBezierCurveTo(cx, cy, x, y) {
      this.path.i.push([cx - x, cy - y]);
      this.path.o.push([cx - this.currentX, cy - this.currentY]);
      this.path.v.push([x, y]);
      this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, cx, cx, x))));
      this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, cy, cy, y))));
      this.updateXY(x, y);
    }
  }, {
    key: "quadraticBezierCurveToRelative",
    value: function quadraticBezierCurveToRelative(cx, cy, x, y) {
      this.quadraticBezierCurveTo(this.currentX + cx, this.currentY + cy, this.currentX + x, this.currentY + y);
    }
  }, {
    key: "arcTo",
    value: function arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {
      var cSeries = PathMaker.a2c(this.currentX, this.currentY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y);

      while (cSeries.length >= 6) {
        var iovList = cSeries.splice(0, 6);
        this.path.i.push([iovList[2] - iovList[4], iovList[3] - iovList[5]]);
        this.path.o.push([iovList[0] - this.currentX, iovList[1] - this.currentY]);
        this.path.v.push([iovList[4], iovList[5]]);
        this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, iovList[0], iovList[2], iovList[4]))));
        this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, iovList[1], iovList[3], iovList[5]))));
        this.updateXY(iovList[4], iovList[5]);
      }
    }
  }, {
    key: "arcToRelative",
    value: function arcToRelative(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {
      this.arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, this.currentX + x, this.currentY + y);
    }
  }, {
    key: "closePath",
    value: function closePath() {
      this.path.c = true;
    }
  }, {
    key: "uniform",
    value: function uniform() {
      var _this = this;

      while (this.path.o.length < this.path.i.length) {
        this.path.o.push([0, 0]);
      }

      this.path.v.forEach(function (value) {
        value[0] -= _this.offsetX;
        value[1] -= _this.offsetY;
      });
      this.offsetX = 0;
      this.offsetY = 0;
    }
  }], [{
    key: "a2c",
    value: function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {
      // for more information of where this Math came from visit:
      // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes
      var _120 = Math.PI * 120 / 180,
          rad = Math.PI / 180 * (+angle || 0),
          res = [],
          xy,
          rotate = function rotate(x, y, rad) {
        var X = x * Math.cos(rad) - y * Math.sin(rad),
            Y = x * Math.sin(rad) + y * Math.cos(rad);
        return {
          x: X,
          y: Y
        };
      };

      if (!rx || !ry) {
        return [x1, y1, x2, y2, x2, y2];
      }

      if (!recursive) {
        xy = rotate(x1, y1, -rad);
        x1 = xy.x;
        y1 = xy.y;
        xy = rotate(x2, y2, -rad);
        x2 = xy.x;
        y2 = xy.y;
        var cos = Math.cos(Math.PI / 180 * angle),
            sin = Math.sin(Math.PI / 180 * angle),
            x = (x1 - x2) / 2,
            y = (y1 - y2) / 2;
        var h = x * x / (rx * rx) + y * y / (ry * ry);

        if (h > 1) {
          h = Math.sqrt(h);
          rx = h * rx;
          ry = h * ry;
        }

        var rx2 = rx * rx,
            ry2 = ry * ry,
            k = (large_arc_flag == sweep_flag ? -1 : 1) * Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),
            cx = k * rx * y / ry + (x1 + x2) / 2,
            cy = k * -ry * x / rx + (y1 + y2) / 2,
            f1 = Math.asin((y1 - cy) / ry),
            f2 = Math.asin((y2 - cy) / ry);
        f1 = x1 < cx ? Math.PI - f1 : f1;
        f2 = x2 < cx ? Math.PI - f2 : f2;
        f1 < 0 && (f1 = Math.PI * 2 + f1);
        f2 < 0 && (f2 = Math.PI * 2 + f2);

        if (sweep_flag && f1 > f2) {
          f1 = f1 - Math.PI * 2;
        }

        if (!sweep_flag && f2 > f1) {
          f2 = f2 - Math.PI * 2;
        }
      } else {
        f1 = recursive[0];
        f2 = recursive[1];
        cx = recursive[2];
        cy = recursive[3];
      }

      var df = f2 - f1;

      if (Math.abs(df) > _120) {
        var f2old = f2,
            x2old = x2,
            y2old = y2;
        f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);
        x2 = cx + rx * Math.cos(f2);
        y2 = cy + ry * Math.sin(f2);
        res = this.a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);
      }

      df = f2 - f1;
      var c1 = Math.cos(f1),
          s1 = Math.sin(f1),
          c2 = Math.cos(f2),
          s2 = Math.sin(f2),
          t = Math.tan(df / 4),
          hx = 4 / 3 * rx * t,
          hy = 4 / 3 * ry * t,
          m1 = [x1, y1],
          m2 = [x1 + hx * s1, y1 - hy * c1],
          m3 = [x2 + hx * s2, y2 - hy * c2],
          m4 = [x2, y2];
      m2[0] = 2 * m1[0] - m2[0];
      m2[1] = 2 * m1[1] - m2[1];

      if (recursive) {
        return [m2, m3, m4].concat(res);
      } else {
        res = [m2, m3, m4].concat(res).join().split(",").map(function (x) {
          return parseFloat(x);
        });
        var newres = [];

        for (var i = 0, ii = res.length; i < ii; i++) {
          newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;
        }

        return newres;
      }
    }
  }]);

  return PathMaker;
}();

exports.PathMaker = PathMaker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXRoLnRzIl0sIm5hbWVzIjpbIlBhdGhNYWtlciIsImMiLCJpIiwibyIsInYiLCJJbmZpbml0eSIsIngiLCJ5IiwiY3VycmVudFgiLCJjdXJyZW50WSIsIm9mZnNldFgiLCJNYXRoIiwibWluIiwib2Zmc2V0WSIsInAwIiwicDEiLCJwMiIsInAzIiwiYSIsImIiLCJtYXgiLCJzcXJ0Iiwicm9vdHMiLCJtYXAiLCJtdWx0aSIsImZvckVhY2giLCJyb290IiwidmFsdWUiLCJwb3ciLCJwYXRoIiwicHVzaCIsInVwZGF0ZVhZIiwibGluZVRvIiwiaG9yaXpvbnRhbFRvIiwidmVydGljYWxUbyIsImMxeCIsImMxeSIsImMyeCIsImMyeSIsImNhbGN1bGF0ZUJlemllck1pbk1heCIsImN1YmljQmV6aWVyQ3VydmVUbyIsImN4IiwiY3kiLCJxdWFkcmF0aWNCZXppZXJDdXJ2ZVRvIiwicngiLCJyeSIsInhBeGlzUm90YXRpb24iLCJsYXJnZUFyY0ZsYWciLCJzd2VlcEZsYWciLCJjU2VyaWVzIiwiYTJjIiwibGVuZ3RoIiwiaW92TGlzdCIsInNwbGljZSIsImFyY1RvIiwieDEiLCJ5MSIsImFuZ2xlIiwibGFyZ2VfYXJjX2ZsYWciLCJzd2VlcF9mbGFnIiwieDIiLCJ5MiIsInJlY3Vyc2l2ZSIsIl8xMjAiLCJQSSIsInJhZCIsInJlcyIsInh5Iiwicm90YXRlIiwiWCIsImNvcyIsInNpbiIsIlkiLCJoIiwicngyIiwicnkyIiwiayIsImFicyIsImYxIiwiYXNpbiIsImYyIiwiZGYiLCJmMm9sZCIsIngyb2xkIiwieTJvbGQiLCJjMSIsInMxIiwiYzIiLCJzMiIsInQiLCJ0YW4iLCJoeCIsImh5IiwibTEiLCJtMiIsIm0zIiwibTQiLCJjb25jYXQiLCJqb2luIiwic3BsaXQiLCJwYXJzZUZsb2F0IiwibmV3cmVzIiwiaWkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBRWFBLFM7Ozs7OztrQ0FDYztBQUNuQkMsTUFBQUEsQ0FB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eUJnQyxJQUF6QixHQUFnQ0MsS0FBaEMsQ0FBc0MsR0FBdEMsRUFBMkM1RSxHQUEzQyxDQUErQyxVQUFBakIsQ0FBQztBQUFBLGlCQUFJOEYsVUFBVSxDQUFDOUYsQ0FBRCxDQUFkO0FBQUEsU0FBaEQsQ0FBTjtBQUNBLFlBQUkrRixNQUFNLEdBQUcsRUFBYjs7QUFDQSxhQUFLLElBQUluRyxDQUFDLEdBQUcsQ0FBUixFQUFXb0csRUFBRSxHQUFHcEMsR0FBRyxDQUFDZixNQUF6QixFQUFpQ2pELENBQUMsR0FBR29HLEVBQXJDLEVBQXlDcEcsQ0FBQyxFQUExQyxFQUE4QztBQUMxQ21HLFVBQUFBLE1BQU0sQ0FBQ25HLENBQUQsQ0FBTixHQUFZQSxDQUFDLEdBQUcsQ0FBSixHQUFRa0UsTUFBTSxDQUFDRixHQUFHLENBQUNoRSxDQUFDLEdBQUcsQ0FBTCxDQUFKLEVBQWFnRSxHQUFHLENBQUNoRSxDQUFELENBQWhCLEVBQXFCK0QsR0FBckIsQ0FBTixDQUFnQzFELENBQXhDLEdBQTRDNkQsTUFBTSxDQUFDRixHQUFHLENBQUNoRSxDQUFELENBQUosRUFBU2dFLEdBQUcsQ0FBQ2hFLENBQUMsR0FBRyxDQUFMLENBQVosRUFBcUIrRCxHQUFyQixDQUFOLENBQWdDM0QsQ0FBeEY7QUFDSDs7QUFDRCxlQUFPK0YsTUFBUDtBQUNIO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYXRoRGVmIH0gZnJvbSAnLi9hbmltYXRpb24nXHJcblxyXG5leHBvcnQgY2xhc3MgUGF0aE1ha2VyIHtcclxuICAgIHB1YmxpYyBwYXRoOiBQYXRoRGVmID0ge1xyXG4gICAgICAgIGM6IGZhbHNlLFxyXG4gICAgICAgIGk6IFtdLFxyXG4gICAgICAgIG86IFtdLFxyXG4gICAgICAgIHY6IFtdXHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgY3VycmVudFg6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRZOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBvZmZzZXRYOiBudW1iZXIgPSBJbmZpbml0eTtcclxuICAgIHByaXZhdGUgb2Zmc2V0WTogbnVtYmVyID0gSW5maW5pdHk7XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVYWSh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFggPSB4XHJcbiAgICAgICAgdGhpcy5jdXJyZW50WSA9IHlcclxuICAgICAgICB0aGlzLm9mZnNldFggPSBNYXRoLm1pbih0aGlzLm9mZnNldFgsIHgpXHJcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gTWF0aC5taW4odGhpcy5vZmZzZXRZLCB5KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlQmV6aWVyTWluTWF4KHAwOiBudW1iZXIsIHAxOiBudW1iZXIsIHAyOiBudW1iZXIsIHAzOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdIHtcclxuICAgICAgICBjb25zdCBhID0gMyAqIChwMyAtIDMgKiBwMiArIDMgKiBwMSAtIHAwKVxyXG4gICAgICAgIGNvbnN0IGIgPSA2ICogKHAyIC0gMiAqIHAxICsgcDApXHJcbiAgICAgICAgY29uc3QgYyA9IDMgKiAocDEgLSBwMClcclxuICAgICAgICBsZXQgbWluID0gSW5maW5pdHksIG1heCA9IC1JbmZpbml0eVxyXG4gICAgICAgIGlmIChiICogYiAtIDQgKiBhICogYyA+PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNxcnQgPSBNYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpXHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RzID0gWzEsIC0xXS5tYXAobXVsdGkgPT4gKG11bHRpICogc3FydCAtIGIpIC8gMiAvIGEpXHJcbiAgICAgICAgICAgIHJvb3RzLmZvckVhY2gocm9vdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocm9vdCA+IDAgJiYgcm9vdCA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgucG93KDEgLSByb290LCAzKSAqIHAwICsgMyAqIE1hdGgucG93KDEgLSByb290LCAyKSAqIHJvb3QgKiBwMSArIDMgKiAoMSAtIHJvb3QpICogcm9vdCAqIHJvb3QgKiBwMiArIE1hdGgucG93KHJvb3QsIDMpICogcDNcclxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgcDAsIHAzKVxyXG4gICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgcDAsIHAzKVxyXG4gICAgICAgIHJldHVybiBbbWluLCBtYXhdXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucGF0aC5jID0gZmFsc2VcclxuICAgICAgICB0aGlzLnBhdGguaSA9IFtbMCwgMF1dXHJcbiAgICAgICAgdGhpcy5wYXRoLm8gPSBbXVxyXG4gICAgICAgIHRoaXMucGF0aC52ID0gW1t4LCB5XV1cclxuICAgICAgICB0aGlzLmN1cnJlbnRYID0geFxyXG4gICAgICAgIHRoaXMuY3VycmVudFkgPSB5XHJcbiAgICAgICAgdGhpcy5vZmZzZXRYID0geFxyXG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IHlcclxuICAgIH1cclxuICAgIHB1YmxpYyBsaW5lVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnBhdGguaSEucHVzaChbMCwgMF0pXHJcbiAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goWzAsIDBdKVxyXG4gICAgICAgIHRoaXMucGF0aC52IS5wdXNoKFt4LCB5XSlcclxuICAgICAgICB0aGlzLnVwZGF0ZVhZKHgsIHkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbGluZVRvUmVsYXRpdmUoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmxpbmVUbyh0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaG9yaXpvbnRhbFRvKHg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubGluZVRvKHgsIHRoaXMuY3VycmVudFkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaG9yaXpvbnRhbFRvUmVsYXRpdmUoeDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5ob3Jpem9udGFsVG8odGhpcy5jdXJyZW50WCArIHgpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdmVydGljYWxUbyh5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmxpbmVUbyh0aGlzLmN1cnJlbnRYLCB5KVxyXG4gICAgfVxyXG4gICAgcHVibGljIHZlcnRpY2FsVG9SZWxhdGl2ZSh5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnZlcnRpY2FsVG8odGhpcy5jdXJyZW50WSArIHkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY3ViaWNCZXppZXJDdXJ2ZVRvKFxyXG4gICAgICAgIGMxeDogbnVtYmVyLFxyXG4gICAgICAgIGMxeTogbnVtYmVyLFxyXG4gICAgICAgIGMyeDogbnVtYmVyLFxyXG4gICAgICAgIGMyeTogbnVtYmVyLFxyXG4gICAgICAgIHg6IG51bWJlcixcclxuICAgICAgICB5OiBudW1iZXJcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMucGF0aC5pIS5wdXNoKFtjMnggLSB4LCBjMnkgLSB5XSlcclxuICAgICAgICB0aGlzLnBhdGgubyEucHVzaChbYzF4IC0gdGhpcy5jdXJyZW50WCwgYzF5IC0gdGhpcy5jdXJyZW50WV0pXHJcbiAgICAgICAgdGhpcy5wYXRoLnYhLnB1c2goW3gsIHldKVxyXG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IE1hdGgubWluKHRoaXMub2Zmc2V0WCwgLi4udGhpcy5jYWxjdWxhdGVCZXppZXJNaW5NYXgodGhpcy5jdXJyZW50WCwgYzF4LCBjMngsIHgpKVxyXG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IE1hdGgubWluKHRoaXMub2Zmc2V0WSwgLi4udGhpcy5jYWxjdWxhdGVCZXppZXJNaW5NYXgodGhpcy5jdXJyZW50WSwgYzF5LCBjMnksIHkpKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWFkoeCwgeSlcclxuICAgIH1cclxuICAgIHB1YmxpYyBjdWJpY0JlemllckN1cnZlVG9SZWxhdGl2ZShcclxuICAgICAgICBjMXg6IG51bWJlcixcclxuICAgICAgICBjMXk6IG51bWJlcixcclxuICAgICAgICBjMng6IG51bWJlcixcclxuICAgICAgICBjMnk6IG51bWJlcixcclxuICAgICAgICB4OiBudW1iZXIsXHJcbiAgICAgICAgeTogbnVtYmVyXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmN1YmljQmV6aWVyQ3VydmVUbyh0aGlzLmN1cnJlbnRYICsgYzF4LCB0aGlzLmN1cnJlbnRZICsgYzF5LCB0aGlzLmN1cnJlbnRYICsgYzJ4LCB0aGlzLmN1cnJlbnRZICsgYzJ5LCB0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcXVhZHJhdGljQmV6aWVyQ3VydmVUbyhjeDogbnVtYmVyLCBjeTogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucGF0aC5pIS5wdXNoKFtjeCAtIHgsIGN5IC0geV0pXHJcbiAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goW2N4IC0gdGhpcy5jdXJyZW50WCwgY3kgLSB0aGlzLmN1cnJlbnRZXSlcclxuICAgICAgICB0aGlzLnBhdGgudiEucHVzaChbeCwgeV0pXHJcbiAgICAgICAgdGhpcy5vZmZzZXRYID0gTWF0aC5taW4odGhpcy5vZmZzZXRYLCAuLi50aGlzLmNhbGN1bGF0ZUJlemllck1pbk1heCh0aGlzLmN1cnJlbnRYLCBjeCwgY3gsIHgpKVxyXG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IE1hdGgubWluKHRoaXMub2Zmc2V0WSwgLi4udGhpcy5jYWxjdWxhdGVCZXppZXJNaW5NYXgodGhpcy5jdXJyZW50WSwgY3ksIGN5LCB5KSlcclxuICAgICAgICB0aGlzLnVwZGF0ZVhZKHgsIHkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcXVhZHJhdGljQmV6aWVyQ3VydmVUb1JlbGF0aXZlKGN4OiBudW1iZXIsIGN5OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5xdWFkcmF0aWNCZXppZXJDdXJ2ZVRvKHRoaXMuY3VycmVudFggKyBjeCwgdGhpcy5jdXJyZW50WSArIGN5LCB0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXJjVG8oXHJcbiAgICAgICAgcng6IG51bWJlcixcclxuICAgICAgICByeTogbnVtYmVyLFxyXG4gICAgICAgIHhBeGlzUm90YXRpb246IG51bWJlcixcclxuICAgICAgICBsYXJnZUFyY0ZsYWc6IG51bWJlcixcclxuICAgICAgICBzd2VlcEZsYWc6IG51bWJlcixcclxuICAgICAgICB4OiBudW1iZXIsXHJcbiAgICAgICAgeTogbnVtYmVyXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCBjU2VyaWVzID0gUGF0aE1ha2VyLmEyYyh0aGlzLmN1cnJlbnRYLCB0aGlzLmN1cnJlbnRZLCByeCwgcnksIHhBeGlzUm90YXRpb24sIGxhcmdlQXJjRmxhZywgc3dlZXBGbGFnLCB4LCB5KSBhcyBudW1iZXJbXVxyXG4gICAgICAgIHdoaWxlIChjU2VyaWVzLmxlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlvdkxpc3QgPSBjU2VyaWVzLnNwbGljZSgwLCA2KVxyXG4gICAgICAgICAgICB0aGlzLnBhdGguaSEucHVzaChbaW92TGlzdFsyXSAtIGlvdkxpc3RbNF0sIGlvdkxpc3RbM10gLSBpb3ZMaXN0WzVdXSlcclxuICAgICAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goW2lvdkxpc3RbMF0gLSB0aGlzLmN1cnJlbnRYLCBpb3ZMaXN0WzFdIC0gdGhpcy5jdXJyZW50WV0pXHJcbiAgICAgICAgICAgIHRoaXMucGF0aC52IS5wdXNoKFtpb3ZMaXN0WzRdLCBpb3ZMaXN0WzVdXSlcclxuICAgICAgICAgICAgdGhpcy5vZmZzZXRYID0gTWF0aC5taW4odGhpcy5vZmZzZXRYLCAuLi50aGlzLmNhbGN1bGF0ZUJlemllck1pbk1heCh0aGlzLmN1cnJlbnRYLCBpb3ZMaXN0WzBdLCBpb3ZMaXN0WzJdLCBpb3ZMaXN0WzRdKSlcclxuICAgICAgICAgICAgdGhpcy5vZmZzZXRZID0gTWF0aC5taW4odGhpcy5vZmZzZXRZLCAuLi50aGlzLmNhbGN1bGF0ZUJlemllck1pbk1heCh0aGlzLmN1cnJlbnRZLCBpb3ZMaXN0WzFdLCBpb3ZMaXN0WzNdLCBpb3ZMaXN0WzVdKSlcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVYWShpb3ZMaXN0WzRdLCBpb3ZMaXN0WzVdKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBhcmNUb1JlbGF0aXZlKFxyXG4gICAgICAgIHJ4OiBudW1iZXIsXHJcbiAgICAgICAgcnk6IG51bWJlcixcclxuICAgICAgICB4QXhpc1JvdGF0aW9uOiBudW1iZXIsXHJcbiAgICAgICAgbGFyZ2VBcmNGbGFnOiBudW1iZXIsXHJcbiAgICAgICAgc3dlZXBGbGFnOiBudW1iZXIsXHJcbiAgICAgICAgeDogbnVtYmVyLFxyXG4gICAgICAgIHk6IG51bWJlclxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5hcmNUbyhyeCwgcnksIHhBeGlzUm90YXRpb24sIGxhcmdlQXJjRmxhZywgc3dlZXBGbGFnLCB0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYTJjKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHJ4OiBudW1iZXIsIHJ5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIsIGxhcmdlX2FyY19mbGFnOiBudW1iZXIsIHN3ZWVwX2ZsYWc6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlciwgcmVjdXJzaXZlPzogbnVtYmVyW10pOiBudW1iZXJbXSB8IG51bWJlcltdW10ge1xyXG4gICAgICAgIC8vIGZvciBtb3JlIGluZm9ybWF0aW9uIG9mIHdoZXJlIHRoaXMgTWF0aCBjYW1lIGZyb20gdmlzaXQ6XHJcbiAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvaW1wbG5vdGUuaHRtbCNBcmNJbXBsZW1lbnRhdGlvbk5vdGVzXHJcbiAgICAgICAgdmFyIF8xMjAgPSBNYXRoLlBJICogMTIwIC8gMTgwLFxyXG4gICAgICAgICAgICByYWQgPSBNYXRoLlBJIC8gMTgwICogKCthbmdsZSB8fCAwKSxcclxuICAgICAgICAgICAgcmVzOiBudW1iZXJbXSA9IFtdLFxyXG4gICAgICAgICAgICB4eSxcclxuICAgICAgICAgICAgcm90YXRlID0gKHg6IG51bWJlciwgeTogbnVtYmVyLCByYWQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIFggPSB4ICogTWF0aC5jb3MocmFkKSAtIHkgKiBNYXRoLnNpbihyYWQpLFxyXG4gICAgICAgICAgICAgICAgICAgIFkgPSB4ICogTWF0aC5zaW4ocmFkKSArIHkgKiBNYXRoLmNvcyhyYWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgeDogWCwgeTogWSB9O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIGlmICghcnggfHwgIXJ5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbeDEsIHkxLCB4MiwgeTIsIHgyLCB5Ml07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgIHh5ID0gcm90YXRlKHgxLCB5MSwgLXJhZCk7XHJcbiAgICAgICAgICAgIHgxID0geHkueDtcclxuICAgICAgICAgICAgeTEgPSB4eS55O1xyXG4gICAgICAgICAgICB4eSA9IHJvdGF0ZSh4MiwgeTIsIC1yYWQpO1xyXG4gICAgICAgICAgICB4MiA9IHh5Lng7XHJcbiAgICAgICAgICAgIHkyID0geHkueTtcclxuICAgICAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKE1hdGguUEkgLyAxODAgKiBhbmdsZSksXHJcbiAgICAgICAgICAgICAgICBzaW4gPSBNYXRoLnNpbihNYXRoLlBJIC8gMTgwICogYW5nbGUpLFxyXG4gICAgICAgICAgICAgICAgeCA9ICh4MSAtIHgyKSAvIDIsXHJcbiAgICAgICAgICAgICAgICB5ID0gKHkxIC0geTIpIC8gMjtcclxuICAgICAgICAgICAgdmFyIGggPSB4ICogeCAvIChyeCAqIHJ4KSArIHkgKiB5IC8gKHJ5ICogcnkpO1xyXG4gICAgICAgICAgICBpZiAoaCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGggPSBNYXRoLnNxcnQoaCk7XHJcbiAgICAgICAgICAgICAgICByeCA9IGggKiByeDtcclxuICAgICAgICAgICAgICAgIHJ5ID0gaCAqIHJ5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByeDIgPSByeCAqIHJ4LFxyXG4gICAgICAgICAgICAgICAgcnkyID0gcnkgKiByeSxcclxuICAgICAgICAgICAgICAgIGsgPSAobGFyZ2VfYXJjX2ZsYWcgPT0gc3dlZXBfZmxhZyA/IC0xIDogMSkgKlxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGguc3FydChNYXRoLmFicygocngyICogcnkyIC0gcngyICogeSAqIHkgLSByeTIgKiB4ICogeCkgLyAocngyICogeSAqIHkgKyByeTIgKiB4ICogeCkpKSxcclxuICAgICAgICAgICAgICAgIGN4ID0gayAqIHJ4ICogeSAvIHJ5ICsgKHgxICsgeDIpIC8gMixcclxuICAgICAgICAgICAgICAgIGN5ID0gayAqIC1yeSAqIHggLyByeCArICh5MSArIHkyKSAvIDIsXHJcbiAgICAgICAgICAgICAgICBmMSA9IE1hdGguYXNpbigoeTEgLSBjeSkgLyByeSksXHJcbiAgICAgICAgICAgICAgICBmMiA9IE1hdGguYXNpbigoeTIgLSBjeSkgLyByeSk7XHJcblxyXG4gICAgICAgICAgICBmMSA9IHgxIDwgY3ggPyBNYXRoLlBJIC0gZjEgOiBmMTtcclxuICAgICAgICAgICAgZjIgPSB4MiA8IGN4ID8gTWF0aC5QSSAtIGYyIDogZjI7XHJcbiAgICAgICAgICAgIGYxIDwgMCAmJiAoZjEgPSBNYXRoLlBJICogMiArIGYxKTtcclxuICAgICAgICAgICAgZjIgPCAwICYmIChmMiA9IE1hdGguUEkgKiAyICsgZjIpO1xyXG4gICAgICAgICAgICBpZiAoc3dlZXBfZmxhZyAmJiBmMSA+IGYyKSB7XHJcbiAgICAgICAgICAgICAgICBmMSA9IGYxIC0gTWF0aC5QSSAqIDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFzd2VlcF9mbGFnICYmIGYyID4gZjEpIHtcclxuICAgICAgICAgICAgICAgIGYyID0gZjIgLSBNYXRoLlBJICogMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGYxID0gcmVjdXJzaXZlWzBdO1xyXG4gICAgICAgICAgICBmMiA9IHJlY3Vyc2l2ZVsxXTtcclxuICAgICAgICAgICAgY3ggPSByZWN1cnNpdmVbMl07XHJcbiAgICAgICAgICAgIGN5ID0gcmVjdXJzaXZlWzNdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGYgPSBmMiAtIGYxO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhkZikgPiBfMTIwKSB7XHJcbiAgICAgICAgICAgIHZhciBmMm9sZCA9IGYyLFxyXG4gICAgICAgICAgICAgICAgeDJvbGQgPSB4MixcclxuICAgICAgICAgICAgICAgIHkyb2xkID0geTI7XHJcbiAgICAgICAgICAgIGYyID0gZjEgKyBfMTIwICogKHN3ZWVwX2ZsYWcgJiYgZjIgPiBmMSA/IDEgOiAtMSk7XHJcbiAgICAgICAgICAgIHgyID0gY3ggKyByeCAqIE1hdGguY29zKGYyKTtcclxuICAgICAgICAgICAgeTIgPSBjeSArIHJ5ICogTWF0aC5zaW4oZjIpO1xyXG4gICAgICAgICAgICByZXMgPSB0aGlzLmEyYyh4MiwgeTIsIHJ4LCByeSwgYW5nbGUsIDAsIHN3ZWVwX2ZsYWcsIHgyb2xkLCB5Mm9sZCwgW2YyLCBmMm9sZCwgY3gsIGN5XSkgYXMgbnVtYmVyW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRmID0gZjIgLSBmMTtcclxuICAgICAgICB2YXIgYzEgPSBNYXRoLmNvcyhmMSksXHJcbiAgICAgICAgICAgIHMxID0gTWF0aC5zaW4oZjEpLFxyXG4gICAgICAgICAgICBjMiA9IE1hdGguY29zKGYyKSxcclxuICAgICAgICAgICAgczIgPSBNYXRoLnNpbihmMiksXHJcbiAgICAgICAgICAgIHQgPSBNYXRoLnRhbihkZiAvIDQpLFxyXG4gICAgICAgICAgICBoeCA9IDQgLyAzICogcnggKiB0LFxyXG4gICAgICAgICAgICBoeSA9IDQgLyAzICogcnkgKiB0LFxyXG4gICAgICAgICAgICBtMSA9IFt4MSwgeTFdLFxyXG4gICAgICAgICAgICBtMiA9IFt4MSArIGh4ICogczEsIHkxIC0gaHkgKiBjMV0sXHJcbiAgICAgICAgICAgIG0zID0gW3gyICsgaHggKiBzMiwgeTIgLSBoeSAqIGMyXSxcclxuICAgICAgICAgICAgbTQgPSBbeDIsIHkyXTtcclxuICAgICAgICBtMlswXSA9IDIgKiBtMVswXSAtIG0yWzBdO1xyXG4gICAgICAgIG0yWzFdID0gMiAqIG0xWzFdIC0gbTJbMV07XHJcbiAgICAgICAgaWYgKHJlY3Vyc2l2ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gW20yLCBtMywgbTRdLmNvbmNhdChyZXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcyA9IFttMiwgbTMsIG00XS5jb25jYXQocmVzKS5qb2luKCkuc3BsaXQoXCIsXCIpLm1hcCh4ID0+IHBhcnNlRmxvYXQoeCkpO1xyXG4gICAgICAgICAgICB2YXIgbmV3cmVzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdyZXNbaV0gPSBpICUgMiA/IHJvdGF0ZShyZXNbaSAtIDFdLCByZXNbaV0sIHJhZCkueSA6IHJvdGF0ZShyZXNbaV0sIHJlc1tpICsgMV0sIHJhZCkueDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3cmVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xvc2VQYXRoKCkge1xyXG4gICAgICAgIHRoaXMucGF0aC5jID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bmlmb3JtKCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLnBhdGgubyEubGVuZ3RoIDwgdGhpcy5wYXRoLmkhLmxlbmd0aClcclxuICAgICAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goWzAsIDBdKVxyXG4gICAgICAgIHRoaXMucGF0aC52IS5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgdmFsdWVbMF0gLT0gdGhpcy5vZmZzZXRYXHJcbiAgICAgICAgICAgIHZhbHVlWzFdIC09IHRoaXMub2Zmc2V0WVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5vZmZzZXRYID0gMFxyXG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IDBcclxuICAgIH1cclxufSJdfQ==