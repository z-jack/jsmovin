"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.calculateBaseTransform = calculateBaseTransform;
exports.getBoundingBox = getBoundingBox;

function calculateBaseTransform(dom, root) {
  return root.getScreenCTM().inverse().multiply(dom.getScreenCTM());
}

function getBoundingBox(dom) {
  var svgRoot = dom;

  while (true) {
    if (svgRoot.parentElement instanceof SVGGraphicsElement) {
      svgRoot = svgRoot.parentElement;
    } else {
      break;
    }
  }

  var baseBox = calculateBaseTransform(dom, svgRoot);
  var refBBox = dom.getBBox();
  var coordinate = [baseBox.e + refBBox.x, baseBox.f + refBBox.y, refBBox.width + 1, refBBox.height + 1];
  return coordinate;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9oZWxwZXIudHMiXSwibmFtZXMiOlsiY2FsY3VsYXRlQmFzZVRyYW5zZm9ybSIsImRvbSIsInJvb3QiLCJnZXRTY3JlZW5DVE0iLCJpbnZlcnNlIiwibXVsdGlwbHkiLCJnZXRCb3VuZGluZ0JveCIsInN2Z1Jvb3QiLCJwYXJlbnRFbGVtZW50IiwiU1ZHR3JhcGhpY3NFbGVtZW50IiwiYmFzZUJveCIsInJlZkJCb3giLCJnZXRCQm94IiwiY29vcmRpbmF0ZSIsImUiLCJ4IiwiZiIsInkiLCJ3aWR0aCIsImhlaWdodCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxTQUFTQSxzQkFBVCxDQUFnQ0MsR0FBaEMsRUFBeURDLElBQXpELEVBQW1GO0FBQ3RGLFNBQU9BLElBQUksQ0FBQ0MsWUFBTCxHQUFxQkMsT0FBckIsR0FBK0JDLFFBQS9CLENBQXdDSixHQUFHLENBQUNFLFlBQUosRUFBeEMsQ0FBUDtBQUNIOztBQUVNLFNBQVNHLGNBQVQsQ0FBd0JMLEdBQXhCLEVBQWlEO0FBQ3BELE1BQUlNLE9BQTJCLEdBQUdOLEdBQWxDOztBQUNBLFNBQU8sSUFBUCxFQUFhO0FBQ1QsUUFBSU0sT0FBTyxDQUFDQyxhQUFSLFlBQWlDQyxrQkFBckMsRUFBeUQ7QUFDckRGLE1BQUFBLE9BQU8sR0FBR0EsT0FBTyxDQUFDQyxhQUFsQjtBQUNILEtBRkQsTUFFTztBQUNIO0FBQ0g7QUFDSjs7QUFDRCxNQUFNRSxPQUFPLEdBQUdWLHNCQUFzQixDQUFDQyxHQUFELEVBQU1NLE9BQU4sQ0FBdEM7QUFDQSxNQUFNSSxPQUFPLEdBQUdWLEdBQUcsQ0FBQ1csT0FBSixFQUFoQjtBQUNBLE1BQU1DLFVBQTRDLEdBQUcsQ0FBQ0gsT0FBTyxDQUFDSSxDQUFSLEdBQVlILE9BQU8sQ0FBQ0ksQ0FBckIsRUFBd0JMLE9BQU8sQ0FBQ00sQ0FBUixHQUFZTCxPQUFPLENBQUNNLENBQTVDLEVBQStDTixPQUFPLENBQUNPLEtBQVIsR0FBZ0IsQ0FBL0QsRUFBa0VQLE9BQU8sQ0FBQ1EsTUFBUixHQUFpQixDQUFuRixDQUFyRDtBQUNBLFNBQU9OLFVBQVA7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVCYXNlVHJhbnNmb3JtKGRvbTogU1ZHR3JhcGhpY3NFbGVtZW50LCByb290OiBTVkdHcmFwaGljc0VsZW1lbnQpIHtcbiAgICByZXR1cm4gcm9vdC5nZXRTY3JlZW5DVE0oKSEuaW52ZXJzZSgpLm11bHRpcGx5KGRvbS5nZXRTY3JlZW5DVE0oKSEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3VuZGluZ0JveChkb206IFNWR0dyYXBoaWNzRWxlbWVudCkge1xuICAgIGxldCBzdmdSb290OiBTVkdHcmFwaGljc0VsZW1lbnQgPSBkb21cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAoc3ZnUm9vdC5wYXJlbnRFbGVtZW50IGluc3RhbmNlb2YgU1ZHR3JhcGhpY3NFbGVtZW50KSB7XG4gICAgICAgICAgICBzdmdSb290ID0gc3ZnUm9vdC5wYXJlbnRFbGVtZW50XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJhc2VCb3ggPSBjYWxjdWxhdGVCYXNlVHJhbnNmb3JtKGRvbSwgc3ZnUm9vdClcbiAgICBjb25zdCByZWZCQm94ID0gZG9tLmdldEJCb3goKVxuICAgIGNvbnN0IGNvb3JkaW5hdGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdID0gW2Jhc2VCb3guZSArIHJlZkJCb3gueCwgYmFzZUJveC5mICsgcmVmQkJveC55LCByZWZCQm94LndpZHRoICsgMSwgcmVmQkJveC5oZWlnaHQgKyAxXVxuICAgIHJldHVybiBjb29yZGluYXRlXG59Il19